<div class="min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8">
  <div class="max-w-3xl mx-auto">
    <!-- Form Card -->
    <div class="bg-white shadow-lg rounded-lg overflow-hidden">
      <div class="px-6 py-8">
        <h2 class="text-2xl font-bold text-center text-gray-800 mb-8">Payslip Generator</h2>
        
        <form [formGroup]="payslipForm" class="space-y-6">
          <!-- Basic Information -->
          <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
            <div>
              <label class="block text-sm font-medium text-gray-700">Employee Name</label>
              <input type="text" formControlName="name" readonly
                     class="mt-1 block w-full rounded-md border-gray-300 bg-gray-50 shadow-sm cursor-not-allowed">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700">Employee ID</label>
              <input type="text" formControlName="empId" readonly
                     class="mt-1 block w-full rounded-md border-gray-300 bg-gray-50 shadow-sm cursor-not-allowed">
              <!-- <p class="mt-1 text-sm text-gray-500">Employee details are automatically populated</p> -->
            </div>
          </div>

          <!-- Pay Period -->
          <div>
            <label class="block text-sm font-medium text-gray-700">Pay Period</label>
            <input type="text" formControlName="payPeriod" readonly
                   class="mt-1 block w-full rounded-md border-gray-300 bg-gray-50 shadow-sm">
            <!-- <p class="mt-1 text-sm text-gray-500">Current pay period is set automatically</p> -->
          </div>

          <!-- Salary -->
          <div>
            <label class="block text-sm font-medium text-gray-700">Salary</label>
            <input type="number" formControlName="salary" 
                   class="[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
            <p class="mt-1 text-sm text-gray-500">Enter the salary amount (Base Salary + Allowances will be calculated automatically)</p>
          </div>

          <!-- Base Salary -->
          <div>
            <label class="block text-sm font-medium text-gray-700">Base Salary (80%)</label>
            <input type="number" formControlName="BaseSalary" readonly
                   class="[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none mt-1 block w-full rounded-md border-gray-300 bg-gray-50 shadow-sm cursor-not-allowed">
          </div>

          <!-- Allowances -->
          <div>
            <h3 class="text-lg font-medium text-gray-900">Allowances</h3>
            <div class="mt-4">
              <label class="block text-sm font-medium text-gray-700">Total Allowances (20%)</label>
              <input type="number" formControlName="allowances" readonly
                     class="[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none mt-1 block w-full rounded-md border-gray-300 bg-gray-50 shadow-sm cursor-not-allowed">
            </div>
          </div>

          <!-- Deductions -->
          <div>
            <h3 class="text-lg font-medium text-gray-900">Deductions</h3>
            <div class="mt-4">
              <label class="block text-sm font-medium text-gray-700">Total Deductions</label>
              <input type="number" formControlName="deductions" 
                     class="[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
            </div>
          </div>

          <!-- Net Salary -->
          <div class="bg-gray-50 p-4 rounded-lg">
            <div class="flex justify-between items-center">
              <span class="text-lg font-medium text-gray-900">Net Salary:</span>
              <span style="color: #059669; font-size: 1.5rem; font-weight: bold;">₹ {{calculateNetSalary()}}</span>
            </div>
          </div>

          <!-- Actions -->
          <div class="flex gap-4">
            <button type="button" 
                    (click)="togglePreview()"
                    [disabled]="!payslipForm.valid"
                    class="flex-1 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white 
                           bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500
                           disabled:bg-gray-400 disabled:cursor-not-allowed">
              Preview
            </button>
            <button type="button" 
                    (click)="generatePDF()"
                    [disabled]="!payslipForm.valid"
                    class="flex-1 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white 
                           bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500
                           disabled:bg-gray-400 disabled:cursor-not-allowed">
              Generate PDF
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Payslip Preview -->
    <div *ngIf="showPreview" id="payslip-preview" style="margin-top: 2rem; background-color: #ffffff; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); border-radius: 0.5rem; overflow: hidden; width: 210mm;">
      <div style="padding: 2.5rem 2rem;">
        <!-- Header with Logo and Title -->
        <div style="text-align: center; margin-bottom: 2rem; padding-bottom: 1.5rem; border-bottom: 2px solid #e5e7eb;">
          <h2 style="font-size: 1.875rem; font-weight: bold; color: #111827; margin-bottom: 0.5rem;">EMPLOYEE PAYSLIP</h2>
          <p style="font-size: 1.125rem; color: #4b5563;">{{payslipForm.value.payPeriod}}</p>
        </div>

        <!-- Employee Information -->
        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 2rem; margin-bottom: 2rem; padding-bottom: 1.5rem; border-bottom: 1px solid #e5e7eb;">
          <div style="display: flex; flex-direction: column; gap: 1rem;">
            <div>
              <p style="font-size: 0.875rem; font-weight: 600; color: #4b5563; text-transform: uppercase;">Employee Name</p>
              <p style="font-size: 1.125rem; font-weight: 500; color: #111827; margin-top: 0.25rem;">{{payslipForm.value.name}}</p>
            </div>
            <div>
              <p style="font-size: 0.875rem; font-weight: 600; color: #4b5563; text-transform: uppercase;">Employee ID</p>
              <p style="font-size: 1.125rem; font-weight: 500; color: #111827; margin-top: 0.25rem;">{{payslipForm.value.empId}}</p>
            </div>
          </div>
          <div style="display: flex; flex-direction: column; gap: 1rem;">
            <div>
              <p style="font-size: 0.875rem; font-weight: 600; color: #4b5563; text-transform: uppercase;">Pay Period</p>
              <p style="font-size: 1.125rem; font-weight: 500; color: #111827; margin-top: 0.25rem;">{{payslipForm.value.payPeriod}}</p>
            </div>
            <div>
              <p style="font-size: 0.875rem; font-weight: 600; color: #4b5563; text-transform: uppercase;">Payment Date</p>
              <p style="font-size: 1.125rem; font-weight: 500; color: #111827; margin-top: 0.25rem;">{{payslipForm.value.payPeriod}}</p>
            </div>
          </div>
        </div>

        <!-- Salary Details -->
        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 3rem; margin-bottom: 2rem;">
          <!-- Earnings Section -->
          <div style="display: flex; flex-direction: column; gap: 1.5rem;">
            <h3 style="font-size: 1.25rem; font-weight: 700; color: #111827; padding-bottom: 0.5rem; border-bottom: 1px solid #e5e7eb;">Earnings</h3>
            <div style="display: flex; flex-direction: column; gap: 1rem;">
              <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.5rem 0;">
                <span style="color: #374151;">Base Salary</span>
                <span style="font-weight: 500;">₹ {{payslipForm.value.BaseSalary}}</span>
              </div>
              <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.5rem 0;">
                <span style="color: #374151;">Total Allowances</span>
                <span style="font-weight: 500;">₹ {{payslipForm.value.allowances}}</span>
              </div>
              <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.5rem 0; border-top: 1px solid #e5e7eb;">
                <span style="font-weight: 600; color: #111827;">Gross Earnings</span>
                <span style="font-weight: 700;">₹ {{payslipForm.value.BaseSalary + payslipForm.value.allowances}}</span>
              </div>
            </div>
          </div>

          <!-- Deductions Section -->
          <div style="display: flex; flex-direction: column; gap: 1.5rem;">
            <h3 style="font-size: 1.25rem; font-weight: 700; color: #111827; padding-bottom: 0.5rem; border-bottom: 1px solid #e5e7eb;">Deductions</h3>
            <div style="display: flex; flex-direction: column; gap: 1rem;">
              <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.5rem 0;">
                <span style="color: #374151;">Total Deductions</span>
                <span style="font-weight: 500;">₹ {{payslipForm.value.deductions}}</span>
              </div>
              <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.5rem 0; border-top: 1px solid #e5e7eb;">
                <span style="font-weight: 600; color: #111827;">Total Deductions</span>
                <span style="font-weight: 700;">₹ {{payslipForm.value.deductions}}</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Net Salary -->
        <div style="margin-top: 2rem; padding-top: 1.5rem; border-top: 2px solid #e5e7eb;">
          <div style="background-color: #f9fafb; padding: 1.5rem; border-radius: 0.5rem;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
              <span style="font-size: 1.25rem; font-weight: 700; color: #111827;">NET SALARY</span>
              <span style="color: #059669; font-size: 1.875rem; font-weight: 700;">₹ {{calculateNetSalary()}}</span>
            </div>
          </div>
        </div>

        <!-- Footer -->
        <div style="margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid #e5e7eb; text-align: center;">
          <p style="font-size: 0.875rem; color: #6b7280;">This is a computer-generated document. No signature is required.</p>
        </div>
      </div>
    </div>
  </div>
</div>
