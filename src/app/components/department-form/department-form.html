<!-- Modal Overlay -->
@if (showDeptForm) {
<div
  class="fixed inset-0 flex items-center justify-center bg-black/30 backdrop-blur-sm z-50"
>
  <div class="max-w-md w-full mx-4 p-6 bg-white rounded-lg shadow-lg relative">
    <!-- Close Button -->
    <button
      (click)="showDeptForm = false"
      class="absolute top-3 right-3 text-gray-500 hover:text-gray-700 text-xl"
    >
      &times;
    </button>

    <h2 class="text-2xl font-bold mb-6 text-gray-800">Add Department</h2>
    <form
      [formGroup]="departmentForm"
      (ngSubmit)="onSubmit()"
      class="space-y-6"
    >
      <!-- Department Name -->
      <div>
        <label
          for="departmentName"
          class="block text-sm font-medium text-gray-700 mb-2"
        >
          Department Name
        </label>
        <input
          type="text"
          id="departmentName"
          formControlName="name"
          class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
          [ngClass]="{
            'border-red-500':
              departmentForm.get('name')?.touched &&
              departmentForm.get('name')?.invalid
          }"
        />
        @if (departmentForm.get('name')?.touched &&
        departmentForm.get('name')?.invalid) {
        <div class="mt-1 text-sm text-red-600">
          @if (departmentForm.get('name')?.errors?.['required']) {
          <div>Department name is required</div>
          } @if (departmentForm.get('name')?.errors?.['minlength']) {
          <div>Name must be at least 2 characters</div>
          }
        </div>
        }
      </div>

      <!-- Status -->
      <div>
        <label
          for="status"
          class="block text-sm font-medium text-gray-700 mb-2"
        >
          Status
        </label>
        <select
          id="status"
          formControlName="status"
          class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
        >
          <option [ngValue]="true">Active</option>
          <option [ngValue]="false">Inactive</option>
        </select>
      </div>

      <!-- Submit -->
      <button
        type="submit"
        class="w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition duration-150 ease-in-out"
        [disabled]="departmentForm.invalid"
      >
        Submit
      </button>
    </form>
  </div>
</div>
}

<!-- Departments Section -->
<div class="p-6 mt-5 w-full flex flex-col items-center">
  <!-- Header with Add Button -->
  <div class="flex justify-between items-center mb-4 w-[65%]">
    <h2 class="text-xl font-bold text-gray-800">Departments</h2>
    <button
      (click)="showDeptForm = true"
      class="bg-blue-600 text-white px-4 py-2 rounded-lg shadow hover:bg-blue-700 transition"
    >
      + Add Department
    </button>
  </div>

  <!-- Departments Table -->
  <!-- Departments Table -->
  <div class="overflow-x-auto bg-white rounded-xl shadow w-[65%]">
    <table class="min-w-full text-sm text-left border-collapse">
      <thead class="bg-gray-100 text-gray-700 uppercase text-xs font-semibold">
        <tr>
          <th class="px-6 py-3 border-b">Department Name</th>
          <th class="px-6 py-3 border-b">Status</th>
          <th class="px-6 py-3 border-b">Actions</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-200">
        @for (dept of departments; track dept.id) {
        <tr>
          <td class="px-6 py-3">{{ dept.departmentName }}</td>
          <td class="px-6 py-3">
            @if (dept.status) {
            <span
              class="inline-block px-2 py-1 text-xs font-semibold text-green-800 bg-green-200 rounded-full"
            >
              Active
            </span>
            } @else {
            <span
              class="inline-block px-2 py-1 text-xs font-semibold text-red-800 bg-red-200 rounded-full"
            >
              Inactive
            </span>
            }
          </td>
          <td class="px-6 py-3 flex gap-2">
            <button
              (click)="editDept(dept)"
              class="text-blue-600 hover:underline"
            >
              Edit
            </button>
            <button
              (click)="deleteDept(dept.id)"
              class="text-red-600 hover:underline"
            >
              Delete
            </button>
          </td>
        </tr>
        }
      </tbody>
    </table>
  </div>
</div>
